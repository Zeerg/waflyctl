language: go

go:
  - 1.9
  - master

before_script:
  - go get github.com/golang/lint/golint
  - go get honnef.co/go/tools/cmd/staticcheck
  - go get github.com/golang/dep/cmd/dep

script:
  - dep ensure
  - go vet
  - staticcheck
  - golint
  - go build waflyctl.go
  - ./waflyctl || exit 0

# calls goreleaser
after_success:
  - test -n "$TRAVIS_TAG" && curl -sL https://git.io/goreleaser | bash
